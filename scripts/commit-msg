#!/bin/bash

commit_msg_file=$1

first_line=$(head -n1 "$commit_msg_file")

# Check if starts with type
if ! echo "$first_line" | grep -qE '^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: '; then
    echo "Commit message must start with a type: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert"
    exit 1
fi

# Check lowercase
if echo "$first_line" | grep -q '[A-Z]'; then
    echo "Commit message first line must be lowercase"
    exit 1
fi

# Check length <=60
if [ ${#first_line} -gt 60 ]; then
    echo "Commit message first line must be <=60 characters"
    exit 1
fi